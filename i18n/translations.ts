import type { LanguageCode, TranslationDictionary } from './types';

export const SUPPORTED_LANGUAGES: LanguageCode[] = ['pt-BR', 'en-US'];

export const LANGUAGE_LABELS: Record<LanguageCode, string> = {
  'pt-BR': 'Portugu√™s (Brasil)',
  'en-US': 'English (US)',
};

export const DEFAULT_LANGUAGE: LanguageCode = 'pt-BR';

const messages: Record<LanguageCode, TranslationDictionary> = {
  'pt-BR': {
    'common.confirm': 'Confirmar',
    'common.cancel': 'Cancelar',
    'common.loading': 'Carregando...',
    'common.empty': 'Nenhum item encontrado.',
    'common.error': 'Ocorreu um erro inesperado.',
    'common.language.ptBR': 'Portugu√™s (Brasil)',
    'common.language.enUS': 'English (US)',
    'common.terms': 'Ao continuar, voc√™ concorda com nossos Termos e Pol√≠tica de Privacidade.',
    'common.dismiss': 'Fechar',

    'login.title': 'Bem-vindo',
    'login.subtitle': 'Entre para continuar',
    'login.emailHeading': 'Entrar com email e senha',
    'login.emailPlaceholder': 'email@exemplo.com',
    'login.passwordPlaceholder': 'Senha',
    'login.forgotPassword': 'Esqueci minha senha',
    'login.submit': 'Entrar',
    'login.createAccount': 'Criar conta com email',
    'login.or': 'ou',
    'login.authenticating': 'Autenticando‚Ä¶',
    'login.languageButton': 'Idioma',
    'login.provider.apple': 'Continuar com Apple (Simulado)',
    'login.provider.google': 'Continuar com Google (Simulado)',
    'login.provider.microsoft': 'Continuar com Microsoft (Simulado)',
    'login.footerPrefix': 'Ao continuar, voc√™ concorda com nossos',
    'login.footerTerms': 'Termos',
    'login.footerPrivacy': 'Pol√≠tica de Privacidade',
    'login.footerAnd': 'e',

    'phone.title': 'Verifica√ß√£o de telefone',
    'phone.subtitle': 'Insira seu n√∫mero para continuar',
    'phone.dddLabel': 'DDD',
    'phone.numberLabel': 'N√∫mero',
    'phone.submit': 'Enviar c√≥digo',
    'phone.resend': 'Reenviar c√≥digo',
    'phone.pending': 'Enviando...',
    'phone.infoPending': 'Precisamos confirmar seu telefone para liberar o acesso.',
    'phone.expired': 'Fluxo expirado. Fa√ßa login novamente.',
    'phone.invalidDDD': 'Informe o DDD com 2 d√≠gitos.',
    'phone.invalidPhone': 'Informe o telefone no formato XXXXX-XXXX.',
    'phone.sentInfo': 'Enviamos um c√≥digo de 5 d√≠gitos para o n√∫mero informado.',
    'phone.ddPlaceholder': 'DD',
    'phone.numberPlaceholder': 'XXXXX-XXXX',

    'code.title': 'Confirme o c√≥digo',
    'code.subtitle': 'Enviamos um c√≥digo por SMS',
    'code.instructions': 'Insira os 5 d√≠gitos recebidos para concluir sua autentica√ß√£o.',
    'code.inputPlaceholder': 'C√≥digo de verifica√ß√£o',
    'code.submit': 'Confirmar',
    'code.resend': 'Reenviar c√≥digo',
    'code.expired': 'Fluxo expirado. Fa√ßa login novamente.',
    'code.invalidLength': 'Digite os 5 d√≠gitos do c√≥digo.',
    'code.sentTo': 'Enviamos para {phone}',
    'code.back': 'Corrigir telefone',

    'home.heading.default': 'Livros Disponiveis',
    'home.heading.search': 'Resultado: "{text}"',
    'home.filter': 'Filtrar',
    'home.searchPlaceholder': 'Buscar por t√≠tulo ou autor',
    'home.searchSubmit': 'Buscar',
    'home.searchClear': 'Limpar',
    'home.keyboardDismiss': 'Fechar',
    'home.error': 'N√£o foi poss√≠vel carregar os livros.',
    'home.loading': 'Carregando...',
    'home.empty': 'Nenhum item nesta p√°gina.',
    'home.totalSingular': '{count} livro no total',
    'home.totalPlural': '{count} livros no total',
    'home.rows.library': 'Sua biblioteca',
    'home.rows.new': 'Novos na Cole√ß√£o',
    'home.rows.recommended': 'Escolhidos para voc√™',
    'home.rows.search': 'Resultados para "{text}"',
    'home.rows.genrePrefix': 'G√™nero: {name}',
    'home.rows.searchEmpty': 'Nenhum livro encontrado para esta busca.',
    'home.rows.emptyDefault': 'Nenhum livro dispon√≠vel.',
    'home.rows.libraryEmpty': 'Adicione livros aos favoritos para v√™-los aqui.',
    'home.rows.randomEmpty': 'Ainda n√£o encontramos t√≠tulos para este tema.',
    'home.rows.topRead': 'Mais lidos',
    'home.rows.continue': 'Continue lendo',
    'home.rows.rewatch': 'Leia novamente',
    'home.rows.recommendBecause': 'Porque voc√™ leu {title}',
    'home.rows.recommendFallback': 'Porque voc√™ terminou seu √∫ltimo livro',
    'home.rows.insightEmpty': 'Nenhum livro dispon√≠vel.',
    'home.shelf.retry': 'Tentar novamente',
    'home.shelf.empty': 'Nenhum livro dispon√≠vel.',

    'library.heading': 'Biblioteca',
    'library.empty': 'Nenhum favorito encontrado.',
    'library.loading': 'Carregando favoritos...',
    'library.emptyPage': 'Nenhum favorito nesta p√°gina.',
    'library.none': 'Nenhum livro nos favoritos ainda.',
    'library.totalSingular': '{count} livro favoritado',
    'library.totalPlural': '{count} livros favoritados',

    'book.author': 'Autor',
    'book.year': 'Ano',
    'book.language': 'Idioma',
    'book.genres': 'G√™neros',
    'book.summaryTitle': 'Leitura em voz',
    'book.summaryLoading': 'Carregando resumo...',
    'book.summaryExpand': 'Toque para expandir e facilitar a leitura',
    'book.summaryCollapse': 'Toque para recolher',
    'book.audioLoading': 'Carregando √°udio...',
    'book.noCover': 'Sem capa',
    'book.yourRating': 'Sua avalia√ß√£o',
    'book.yourRatingValue': 'Avalia√ß√£o: {rating}/5',
    'book.locked': 'Livro bloqueado',
    'book.unlockWithKey': 'Use 1 chave para liberar o √°udio e o resumo deste t√≠tulo.',
    'book.unlockCta': 'Desbloquear',
    'book.noKeys': 'Voc√™ n√£o tem chaves dispon√≠veis para desbloquear este livro.',
    'book.noKeysTitle': 'Sem chaves suficientes',
    'book.noKeysMessage': 'Voc√™ n√£o tem chaves suficientes para desbloquear este livro.',
    'genre.title': 'Selecione um g√™nero',
    'genre.clear': 'Limpar filtro',
    'genre.close': 'Fechar',

    'profile.title': 'Perfil',
    'profile.language': 'Idioma preferido',
    'profile.languageDescription': 'Escolha o idioma da interface',
    'profile.languageUpdated': 'Idioma atualizado com sucesso.',
    'profile.languageButton': 'Idioma',
    'profile.email': 'Email',
    'profile.emailMissing': 'N√£o informado',
    'profile.phone': 'Telefone',
    'profile.phoneMissing': 'N√£o verificado',
    'profile.changePhone': 'Alterar telefone',
    'profile.signOut': 'Sair',
    'profile.delete': 'Excluir conta',
    'profile.greeting': 'Ol√°!',
    'profile.signOutConfirmTitle': 'Sair',
    'profile.signOutConfirmMessage': 'Deseja encerrar a sess√£o?',
    'profile.cancel': 'Cancelar',
    'profile.keys': 'Chaves',
    'profile.keysHint': 'para desbloquear livros',
    'profile.supportTitle': 'Ajuda e suporte',
    'profile.account': 'Conta',
    'profile.checkinCard': 'Check-in di√°rio',
    'profile.booksRead': 'lidos',
    'profile.inLibrary': 'na biblioteca',
    'profile.unlocked': 'desbloqueados',
    'profile.support': 'Suporte',
    'profile.copy': 'Copiar',
    'profile.copied': 'Copiado!',
    'profile.userId': 'ID do usu√°rio',
    'profile.checkin': 'Check-in di√°rio',
    'profile.checkinDesc': 'Em breve voc√™ poder√° registrar sua presen√ßa di√°ria.',
    'profile.keysRewardOne': 'Voc√™ recebeu {count} chave üîë',
    'profile.keysRewardOther': 'Voc√™ recebeu {count} chaves üîë',
    'profile.streakTitle': 'Dias logados consecutivos',
    'profile.close': 'Fechar',

    // Auth (multi-idioma)
    'auth.common.back': 'Voltar',
    'auth.common.sendCode': 'Enviar c√≥digo',
    'auth.common.resendCode': 'Reenviar c√≥digo',
    'auth.common.resendIn': 'Reenviar em {seconds}s',
    'auth.common.confirm': 'Confirmar',
    'auth.common.next': 'Avan√ßar',
    'auth.common.submit': 'Enviar',
    'auth.common.emailPlaceholder': 'email@exemplo.com',

    'auth.register.title': 'Criar conta',
    'auth.register.subtitle': 'Informe um email v√°lido para receber o c√≥digo de verifica√ß√£o.',

    'auth.verifyEmail.title': 'Verifique seu email',
    'auth.verifyEmail.subtitleWithEmail': 'Digite o c√≥digo enviado para\n{email}',
    'auth.verifyEmail.subtitleGeneric': 'Digite o c√≥digo enviado ao seu email.',

    'auth.password.title': 'Definir senha',
    'auth.password.subtitle': 'Crie uma senha para finalizar o cadastro.',
    'auth.password.placeholder': 'Senha (m√≠nimo 8 caracteres)',
    'auth.password.optionalName': 'Nome (opcional)',
    'auth.password.confirm': 'Confirme a senha',
    'auth.password.mismatch': 'As senhas precisam ser iguais.',
    'auth.password.hint': 'A senha deve ter pelo menos {min} caracteres.',
    'auth.password.continue': 'Continuar',
    'auth.password.saveAndContinue': 'Salvar e continuar',
    'auth.password.show': 'Mostrar',
    'auth.password.hide': 'Ocultar',

    'auth.forgot.title': 'Recuperar senha',
    'auth.forgot.subtitle': 'Informe seu email para enviar o c√≥digo de recupera√ß√£o.',
    'auth.forgot.codeTitle': 'Recuperar senha',
    'auth.forgot.codeSubtitle': 'Digite o c√≥digo enviado para\n{email}',
    'auth.forgot.passwordTitle': 'Nova senha',
    'auth.forgot.passwordSubtitle': 'Defina sua nova senha para continuar.',

    'auth.reset.subtitleEmail': 'Email: {email}',

    'auth.terms.title': 'Termos de Uso',
    'auth.terms.paragraph1':
      'Antes de continuar, confirme que est√° de acordo com os termos de uso e a pol√≠tica de privacidade do Audiolivros. Eles descrevem como seus dados s√£o utilizados, quais s√£o as regras de uso do conte√∫do e as responsabilidades de cada parte.',
    'auth.terms.paragraph2':
      'Ao aceitar, voc√™ autoriza o processamento dos dados necess√°rios para funcionamento do aplicativo e declara que usar√° o conte√∫do apenas para fins pessoais, respeitando os direitos dos autores.',
    'auth.terms.expiresAt': 'O aceite expira em: {label}',
    'auth.terms.acceptIn': 'Aceitar em {seconds}s',
    'auth.terms.accept': 'Aceito',
    'auth.terms.cancel': 'Cancelar',
    'auth.terms.missingToken': 'N√£o encontramos seu token de aceite. Volte ao login para gerar um novo.',
  },
  'en-US': {
    'common.confirm': 'Confirm',
    'common.cancel': 'Cancel',
    'common.loading': 'Loading...',
    'common.empty': 'No items found.',
    'common.error': 'An unexpected error occurred.',
    'common.language.ptBR': 'Portuguese (Brazil)',
    'common.language.enUS': 'English (US)',
    'common.terms': 'By continuing, you agree to our Terms and Privacy Policy.',
    'common.dismiss': 'Close',

    'login.title': 'Welcome',
    'login.subtitle': 'Sign in to continue',
    'login.emailHeading': 'Sign in with email and password',
    'login.emailPlaceholder': 'email@example.com',
    'login.passwordPlaceholder': 'Password',
    'login.forgotPassword': 'Forgot my password',
    'login.submit': 'Sign in',
    'login.createAccount': 'Create account with email',
    'login.or': 'or',
    'login.authenticating': 'Authenticating‚Ä¶',
    'login.languageButton': 'Language',
    'login.provider.apple': 'Continue with Apple (Simulated)',
    'login.provider.google': 'Continue with Google (Simulated)',
    'login.provider.microsoft': 'Continue with Microsoft (Simulated)',
    'login.footerPrefix': 'By continuing, you agree to our',
    'login.footerTerms': 'Terms',
    'login.footerPrivacy': 'Privacy Policy',
    'login.footerAnd': 'and',

    'phone.title': 'Phone verification',
    'phone.subtitle': 'Enter your number to continue',
    'phone.dddLabel': 'Area',
    'phone.numberLabel': 'Number',
    'phone.submit': 'Send code',
    'phone.resend': 'Resend code',
    'phone.pending': 'Sending...',
    'phone.infoPending': 'We need to confirm your phone to grant access.',
    'phone.expired': 'Flow expired. Please sign in again.',
    'phone.invalidDDD': 'Enter the 2-digit area code.',
    'phone.invalidPhone': 'Enter the phone number in the XXXXX-XXXX format.',
    'phone.sentInfo': 'We sent a 5-digit code to the number provided.',
    'phone.ddPlaceholder': 'Area',
    'phone.numberPlaceholder': 'XXXXX-XXXX',

    'code.title': 'Confirm the code',
    'code.subtitle': 'We sent you an SMS code',
    'code.instructions': 'Enter the 5 digits you received to finish your sign-in.',
    'code.inputPlaceholder': 'Verification code',
    'code.submit': 'Confirm code',
    'code.resend': 'Resend code',
    'code.expired': 'Flow expired. Please sign in again.',
    'code.invalidLength': 'Enter the 5-digit code.',
    'code.sentTo': 'Sent to {phone}',
    'code.back': 'Fix phone number',

    'home.heading.default': 'Available Books',
    'home.heading.search': 'Result: "{text}"',
    'home.filter': 'Filter',
    'home.searchPlaceholder': 'Search by title or author',
    'home.searchSubmit': 'Search',
    'home.searchClear': 'Clear',
    'home.keyboardDismiss': 'Close',
    'home.error': 'Unable to load books.',
    'home.loading': 'Loading...',
    'home.empty': 'No items on this page.',
    'home.totalSingular': '{count} book in total',
    'home.totalPlural': '{count} books in total',
    'home.rows.library': 'Your library',
    'home.rows.new': 'New in Collection',
    'home.rows.recommended': 'Picked for you',
    'home.rows.search': 'Results for "{text}"',
    'home.rows.genrePrefix': 'Genre: {name}',
    'home.rows.searchEmpty': 'No books matched this search.',
    'home.rows.emptyDefault': 'No books available.',
    'home.rows.libraryEmpty': 'Add books to your favorites to see them here.',
    'home.rows.randomEmpty': 'We could not find titles for this theme yet.',
    'home.rows.topRead': 'Most read',
    'home.rows.continue': 'Continue reading',
    'home.rows.rewatch': 'Read again',
    'home.rows.recommendBecause': 'Because you read {title}',
    'home.rows.recommendFallback': 'Because you finished your latest book',
    'home.rows.insightEmpty': 'No books available.',
    'home.shelf.retry': 'Try again',
    'home.shelf.empty': 'No books available.',

    'library.heading': 'My Favorites',
    'library.empty': 'No favorites found.',
    'library.loading': 'Loading favorites...',
    'library.emptyPage': 'No favorites on this page.',
    'library.none': 'No favorite books yet.',
    'library.totalSingular': '{count} favorite book',
    'library.totalPlural': '{count} favorite books',

    'book.author': 'Author',
    'book.year': 'Year',
    'book.language': 'Language',
    'book.genres': 'Genres',
    'book.summaryTitle': 'Voice reading',
    'book.summaryLoading': 'Loading summary...',
    'book.summaryExpand': 'Tap to expand and improve readability',
    'book.summaryCollapse': 'Tap to collapse',
    'book.audioLoading': 'Loading audio...',
    'book.noCover': 'No cover',
    'book.yourRating': 'Your rating',
    'book.yourRatingValue': 'Rating: {rating}/5',
    'book.locked': 'Locked book',
    'book.unlockWithKey': 'Use 1 key to unlock audio and summary for this title.',
    'book.unlockCta': 'Unlock',
    'book.noKeys': 'You do not have keys available to unlock this book.',
    'book.noKeysTitle': 'Not enough keys',
    'book.noKeysMessage': 'You do not have enough keys to unlock this book.',
    'genre.title': 'Choose a genre',
    'genre.clear': 'Clear filter',
    'genre.close': 'Close',

    'profile.title': 'Profile',
    'profile.language': 'Preferred language',
    'profile.languageDescription': 'Choose the interface language',
    'profile.languageUpdated': 'Language updated successfully.',
    'profile.languageButton': 'Language',
    'profile.email': 'Email',
    'profile.emailMissing': 'Not provided',
    'profile.phone': 'Phone',
    'profile.phoneMissing': 'Not verified',
    'profile.changePhone': 'Update phone',
    'profile.signOut': 'Sign out',
    'profile.delete': 'Delete account',
    'profile.greeting': 'Hello!',
    'profile.signOutConfirmTitle': 'Sign out',
    'profile.signOutConfirmMessage': 'Do you want to end your session?',
    'profile.cancel': 'Cancel',
    'profile.keys': 'Keys',
    'profile.keysHint': 'to unlock books',
    'profile.supportTitle': 'Help & support',
    'profile.account': 'Account',
    'profile.checkinCard': 'Daily check-in',
    'profile.booksRead': 'read',
    'profile.inLibrary': 'in library',
    'profile.unlocked': 'unlocked',
    'profile.support': 'Support',
    'profile.copy': 'Copy',
    'profile.copied': 'Copied!',
    'profile.userId': 'User ID',
    'profile.checkin': 'Daily check-in',
    'profile.checkinDesc': 'Soon you will be able to log your daily presence.',
    'profile.keysRewardOne': 'You received {count} key üîë',
    'profile.keysRewardOther': 'You received {count} keys üîë',
    'profile.streakTitle': 'Consecutive logged days',
    'profile.close': 'Close',

    // Auth (multi-language)
    'auth.common.back': 'Back',
    'auth.common.sendCode': 'Send code',
    'auth.common.resendCode': 'Resend code',
    'auth.common.resendIn': 'Resend in {seconds}s',
    'auth.common.confirm': 'Confirm',
    'auth.common.next': 'Next',
    'auth.common.submit': 'Submit',
    'auth.common.emailPlaceholder': 'email@example.com',

    'auth.register.title': 'Create account',
    'auth.register.subtitle': 'Enter a valid email to receive the verification code.',

    'auth.verifyEmail.title': 'Check your email',
    'auth.verifyEmail.subtitleWithEmail': 'Enter the code sent to\n{email}',
    'auth.verifyEmail.subtitleGeneric': 'Enter the code we sent to your email.',

    'auth.password.title': 'Set password',
    'auth.password.subtitle': 'Create a password to finish signing up.',
    'auth.password.placeholder': 'Password (min 8 characters)',
    'auth.password.optionalName': 'Name (optional)',
    'auth.password.confirm': 'Confirm password',
    'auth.password.mismatch': 'Passwords must match.',
    'auth.password.hint': 'Password must be at least {min} characters.',
    'auth.password.continue': 'Continue',
    'auth.password.saveAndContinue': 'Save and continue',
    'auth.password.show': 'Show',
    'auth.password.hide': 'Hide',

    'auth.forgot.title': 'Recover password',
    'auth.forgot.subtitle': 'Enter your email to send the recovery code.',
    'auth.forgot.codeTitle': 'Recover password',
    'auth.forgot.codeSubtitle': 'Enter the code sent to\n{email}',
    'auth.forgot.passwordTitle': 'New password',
    'auth.forgot.passwordSubtitle': 'Set your new password to continue.',

    'auth.reset.subtitleEmail': 'Email: {email}',

    'auth.terms.title': 'Terms of Use',
    'auth.terms.paragraph1':
      'Before continuing, confirm that you agree with Audiolivros‚Äô terms of use and privacy policy. They describe how your data is used, the rules for content usage, and each party‚Äôs responsibilities.',
    'auth.terms.paragraph2':
      'By accepting, you authorize processing of the data needed for the app to function and agree to use the content only for personal purposes, respecting authors‚Äô rights.',
    'auth.terms.expiresAt': 'Acceptance expires at: {label}',
    'auth.terms.acceptIn': 'Accept in {seconds}s',
    'auth.terms.accept': 'I accept',
    'auth.terms.cancel': 'Cancel',
    'auth.terms.missingToken': 'We could not find your acceptance token. Go back to login to generate a new one.',
  },
};

export function translate(language: LanguageCode, key: string, params?: Record<string, string | number>) {
  const fallback = messages[DEFAULT_LANGUAGE][key];
  const template = messages[language]?.[key] ?? fallback ?? key;
  if (!params) return template;
  return Object.entries(params).reduce((acc, [paramKey, value]) => {
    return acc.replace(new RegExp(`{${paramKey}}`, 'g'), String(value));
  }, template);
}

export function normalizeLanguage(language?: string | null): LanguageCode {
  if (!language) return DEFAULT_LANGUAGE;
  const normalized = language === 'en' ? 'en-US' : language === 'pt' ? 'pt-BR' : language;
  return (SUPPORTED_LANGUAGES as readonly string[]).includes(normalized) ? (normalized as LanguageCode) : DEFAULT_LANGUAGE;
}

export function formatLanguageLabel(language: LanguageCode) {
  return LANGUAGE_LABELS[language] ?? language;
}

export default messages;
